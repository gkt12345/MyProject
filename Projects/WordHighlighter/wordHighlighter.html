<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Highlighter</title>
    <style>
        #paragraph-input {
            border: 2px solid rgb(150, 0, 0);
            width: 400px;
            height: 300px;
            padding: 8px 16px;
            overflow: scroll;
        }

        .highlighted-txt {
            color: rgb(0, 0, 0);
            background-color: rgb(241, 255, 45);
        }
    </style>
</head>

<body>

    <label for="paragraph-input">Enter paragraph here</label>
    <div id="paragraph-input" contenteditable="true">Enter text here</div>
    <br />
    <br />
    <div>Total matches:- <span id="words-counter">0</span></div>
    <br />
    <label for="word-input">Enter word to be higlighted here</label>
    <input type="text" id="word-input" oninput="onSelectionHandler(event)">
    <br />
    <br />
    <label for="ignore-case">Ignore case?</label>
    <input type="checkbox" id="ignore-case" />

    <script>

            let count = 0; 
            
            let checkBox = document.querySelector("#ignore-case").checked;
            let result = "";    


        function onSelectionHandler(event) {
            let input = event.target.value;
            let paragraph = document.getElementById("paragraph-input");
            // console.log(event.target.value); 
           console.log(paragraph);
      
           if(input !== ""){
                let regExp = new RegExp(input, 'gi');
                paragraph.innerHTML = (paragraph.textContent).replace(regExp, "<mark>$&</mark>");
           }     
       
       
       
       
        // if (checkBox) {
            //     result = paragraph.innerText.replaceAll(new RegExp(input,"ig"),function (section) {
            //         count++;
            //         return `<span class="highlighted-text">${section}</span>`;
            //     });
            // }
            // else {
            //     result = paragraph.innerText.replaceAll(input, function(section){
            //         count++;
            //         return `<span class="highlighted-text">${section}</span>`;
            //     });
            // }

            // document.querySelector("#word-counter").innerHTML = count;
            // paragraph.innerHTML = result;

            // if (!input) {
            //     document.querySelector("#word-counter").innerHTML = 0;
            // }
            
        }
    </script>
</body>

</html>


<!-- <script>
    function onSelectionHandler(e){
          let count = 0;
          let input = document.querySelector('#word-input').value;
          let paragraph = document.querySelector('#paragraph-input');
          let parentCheckBox = document.querySelector("#ignore-case").checked;
          let result="";
         if(parentCheckBox){
            result = paragraph.innerText.replaceAll(new RegExp(input,"ig"),function(section){
              count++;
              return `<span class="highlighted-txt">${section}</span>`;
          });
         }else{
            result = paragraph.innerText.replaceAll(input,function(section){
              count++;
              return `<span class="highlighted-txt">${section}</span>`;
          });
         }
          document.querySelector('#words-counter').innerHTML = count;
          paragraph.innerHTML = result;
          if(!input){
            document.querySelector('#words-counter').innerHTML = 0;
          }
        }
</script> -->